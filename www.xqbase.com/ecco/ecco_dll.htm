<html>

<head>
<meta http-equiv="Content-Type"
content="text/html; charset=gb_2312-80">
<meta name="GENERATOR" content="Microsoft FrontPage Express 2.0">
<title>中国象棋开局编号分析驱动程序(ECCO.DLL/libecco.so)使用说明</title>
</head>

<body background="../background.gif">

<dl>
    <div align="center"><center>
    <dt><font size="5" face="楷体_GB2312"><strong>中国象棋开局编号分析驱动程序</strong></font><font
        size="5" face="Arial"><strong>(ECCO.DLL/libecco.so)</strong></font><font
        size="5" face="楷体_GB2312"><strong>使用说明</strong></font><font
        size="6" face="楷体_GB2312"><strong> </strong></font></dt>
    </center></div><div align="center"><center>
    <dt>　</dt>
    </center></div><div align="center"><center>
    <dt>象棋百科全书网 <font face="Times New Roman">(</font><a
        href="mailto:webmaster@xqbase.com"><font
        face="Times New Roman">webmaster@xqbase.com</font></a><font
        face="Times New Roman">)</font>　<font
        face="Times New Roman">2007</font>年<font
        face="Times New Roman">4</font>月</dt>
    </center></div>
    <dt>　</dt>
    <dt><font size="4" face="楷体_GB2312"><strong>一、</strong></font><font
        size="4" face="Arial"><strong>Windows</strong></font><font
        size="4" face="楷体_GB2312"><strong>驱动程序</strong></font><font
        size="4" face="Arial"><strong>ECCO.DLL</strong></font></dt>
    <dt>　</dt>
    <dt>　　<font face="Times New Roman">ECCO.DLL</font>是著名象棋软件《象棋巫师》自带的开局解析系统，现版本号为“<font
        face="Times New Roman">ECCO (2004) Analyst 1.0</font>”，为推广<font
        face="Times New Roman">ECCO</font>编号体系，特此公布此驱动程序的接口，广大象棋软件的开发者可以以任何非商业目的使用该程序。</dt>
    <dt>　　<font face="Times New Roman">ECCO.DLL</font>是<font
        face="Times New Roman">32</font>位<font
        face="Times New Roman">Windows</font>的<font
        face="Times New Roman">API</font>函数动态链接库，包含了以下<font
        face="Times New Roman">5</font>个函数，其接口是：</dt>
    <dd>　</dd>
    <dd>LPCSTR (WINAPI *EccoVersion)(VOID); </dd>
    <dd>// 返回ECCO编号识别系统版本号(注：这个函数的系统别名应该是&quot;_EccoVersion@0&quot;，下同)</dd>
    <dd>VOID (WINAPI *EccoInitOpenVar)(BOOL bTrad);</dd>
    <dd>// 初始化开局和变例字符串，调用以下函数前务必先调用此函数</dd>
    <dd>LONG (WINAPI *EccoIndex)(LPCSTR szMoveFile);</dd>
    <dd>// 返回某个开局的ECCO编号(注：这个函数的系统别名应该是&quot;_EccoIndex@4&quot;，下同)</dd>
    <dd>LPCSTR (WINAPI *EccoOpening)(LONG dwEccoIndex);</dd>
    <dd>// 返回ECCO编号对应的开局名称</dd>
    <dd>LPCSTR (WINAPI *EccoVariation)(LONG dwEccoIndex);</dd>
    <dd>// 返回ECCO编号对应的变例名称</dd>
    <dt>　</dt>
    <dt>　　其中<font face="Times New Roman">EccoIndex</font>函数是开局解析系统的核心，<font
        face="Times New Roman">szMoveFile</font>是用符号纵线格式<font
        face="Times New Roman">(</font>即<font
        face="Times New Roman">C2.5)</font>按顺序排列的字符串，例如<font
        face="Times New Roman">&quot;C2.5N8+7&quot;</font>即代表“<font
        face="Times New Roman">1. </font>炮二平五　马８进７”，返回<font
        face="Times New Roman">4</font>字节的<font
        face="Times New Roman">32</font>位整数<font
        face="Times New Roman">(LONG)</font>，其中前<font
        face="Times New Roman">3</font>字节即<font
        face="Times New Roman">ECCO</font>编号，该<font
        face="Times New Roman">32</font>位整数可直接作为<font
        face="Times New Roman">EccoOpening</font>和<font
        face="Times New Roman">EccoVariation</font>的参数。调用上面这些函数可参考以下<font
        face="Times New Roman">C</font>语言的实例：</dt>
    <dd>　</dd>
    <dd>HMODULE hModule = LoadLibrary(&quot;ECCO.DLL&quot;);</dd>
    <dd>EccoVersion = (LPCSTR (WINAPI *)(VOID)) GetProcAddress(hModule,
        &quot;_EccoVersion@0&quot;);</dd>
    <dd>EccoInitOpenVar = (VOID (WINAPI *)(BOOL)) GetProcAddress(hModule,
        &quot;_EccoInitOpenVar@4&quot;);</dd>
    <dd>EccoIndex = (LONG (WINAPI *)(LPCSTR)) GetProcAddress(hModule,
        &quot;_EccoIndex@4&quot;);</dd>
    <dd>EccoOpening = (LPCSTR (WINAPI *)(LONG)) GetProcAddress(hModule,
        &quot;_EccoOpening@4&quot;);</dd>
    <dd>EccoVariation = (LPCSTR (WINAPI *)(LONG)) GetProcAddress(hModule,
        &quot;_EccoVariation@4&quot;);</dd>
    <dd>// 从ECCO.DLL中获取库函数</dd>
    <dd>EccoVersion();</dd>
    <dd>// 返回指向字符串&quot;ECCO (2004) Analyst 1.0&quot;的指针(LPCSTR)</dd>
    <dd>EccoInitOpenVar(FALSE);</dd>
    <dd>// 使用前务必初始化，参数FALSE表示简体，TRUE表示繁体</dd>
    <dd>EccoIndex(&quot;C2.5N8+7N2+3R9.8R1.2P7+1R2+6N2+3P7+1C8.9R2.3C9-1N8+7A4+5C8.9&quot;);</dd>
    <dd>// 返回由&quot;C45&quot;对应的4字节组成的32位整数(LONG)</dd>
    <dd>EccoOpening(*(LPLONG) &quot;D29&quot;);</dd>
    <dd>// 返回指向字符串&quot;顺炮直车对横车&quot;的指针(LPCSTR)</dd>
    <dd>EccoVariation(*(LPLONG) &quot;D29&quot;);</dd>
    <dd>// 返回指向字符串&quot;红两头蛇对黑双横车&quot;的指针(LPCSTR)</dd>
    <dt>　</dt>
    <dt><font size="4" face="楷体_GB2312"><strong>二、</strong></font><font
        size="4" face="Arial"><strong>Linux</strong></font><font
        size="4" face="楷体_GB2312"><strong>驱动程序</strong></font><font
        size="4" face="Arial"><strong>libecco.so</strong></font></dt>
    <dt>　</dt>
    <dt>　　<font face="Times New Roman">Linux</font>的象棋软件时使用<font
        face="Times New Roman">ECCO</font>时，可调用<font
        face="Times New Roman">Linux</font>下的<font
        face="Times New Roman">ECCO</font>分析驱动程序<font
        face="Times New Roman">libecco.so</font>，其定义的函数如下：</dt>
    <dd>　</dd>
    <dd>const char *EccoVersion(void);</dd>
    <dd>void EccoInitOpenVar(int bTrad); // 参数0表示简体，1表示繁体</dd>
    <dd>long EccoIndex(const char *szMoveFile);</dd>
    <dd>const char *EccoOpening(long dwEccoIndex);</dd>
    <dd>const char *EccoVariation(long dwEccoIndex);</dd>
    <dt>　</dt>
    <dt>　　与<font face="Times New Roman">Windows</font>不同，这些函数的别名没有前缀“<font
        face="Times New Roman">_</font>”和后缀“<font
        face="Times New Roman">@...</font>”。调用上面这些函数可参考以下<font
        face="Times New Roman">C</font>语言的实例：</dt>
    <dd>　</dd>
    <dd>#include &lt;dlfcn.h&gt;</dd>
    <dd>……</dd>
    <dd>void *hModule = dlopen(&quot;libecco.so&quot;, RTLD_LAZY);</dd>
    <dd>EccoVersion = (const char *(*)(void)) dlsym(hModule,
        &quot;EccoVersion&quot;);</dd>
    <dd>EccoInitOpenVar = (void (*)(long)) dlsym(hModule, &quot;EccoInitOpenVar&quot;);</dd>
    <dd>EccoIndex = (long (*)(const char *)) dlsym(hModule,
        &quot;EccoIndex&quot;);</dd>
    <dd>EccoOpening = (const char *(*)(long)) dlsym(hModule,
        &quot;EccoOpening&quot;);</dd>
    <dd>EccoVariation = (const char *(*)(long)) dlsym(hModule,
        &quot;EccoVariation&quot;);</dd>
    <dt>　</dt>
    <dt>　　这些函数的用法与<font
        face="Times New Roman">Windows</font>驱动程序中的相应函数一样，这里不再重复。</dt>
    <dt>　</dt>
    <dt><font size="4" face="楷体_GB2312"><strong>三、下载</strong></font></dt>
    <dt>　</dt>
    <dt>　　<font face="Times New Roman">ECCO.DLL</font>和<font
        face="Times New Roman">libecco.so</font>的下载地址是：<a
        href="http://www.xqbase.com/ecco/ecco_dll.7z"><font
        face="Times New Roman">http://www.xqbase.com/ecco/ecco_dll.7z</font></a>，<font
        face="Times New Roman">7z</font><font size="3">文件用</font><a
        href="http://sevenzip.sourceforge.net/" target="_blank"><font
        size="3" face="Times New Roman">7-Zip</font></a><font
        size="3">或</font><a href="http://www.rarlab.com/"
        target="_blank"><font size="3" face="Times New Roman">WinRAR</font></a><font
        size="3" face="Times New Roman">(3.6+)</font><font
        size="3">打开</font>。</dt>
    <dt>　　若有其他使用上的问题，可登陆《象棋百科全书》论坛<font
        face="Times New Roman">(</font><a
        href="http://bbs.xqbase.com/" target="_blank"><font
        face="Times New Roman">bbs.xqbase.com</font></a><font
        face="Times New Roman">)</font>的“开局百科”栏目询问。</dt>
</dl>

<dir>
    <li>上一篇　<a href="ecco_e.htm">中国象棋开局编号――<font
        face="Times New Roman">E</font>．仙人指路局</a></li>
    <li>下一篇　<a href="opentrend.htm">当代中国象棋开局的发展趋势<font
        face="Times New Roman">(</font>图表<font
        face="Times New Roman">)</font></a></li>
    <li>返　回　<a href="../ecco.htm">象棋百科全书――开局百科</a></li>
</dir>
<div align="center"><center>

<table border="0">
    <tr>
        <td><p align="center"><a
        href="http://www.xqbase.com/" target="_blank"><img
        src="../xqbase.gif" border="0" width="88"
        height="31"></a></p>
        </td>
    </tr>
    <tr>
        <td><a href="http://www.xqbase.com/"
        target="_blank"><font size="2" face="Arial"><strong>www.xqbase.com</strong></font></a></td>
    </tr>
</table>
</center></div>
</body>
</html>
