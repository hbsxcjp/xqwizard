<html>

<head>
<meta http-equiv="Content-Type"
content="text/html; charset=gb_2312-80">
<meta name="GENERATOR" content="Microsoft FrontPage Express 2.0">
<title>关于PGN和FEN记谱规范(下)</title>
</head>

<body background="../background.gif">

<dl>
    <div align="center"><center>
    <dt>《<a href="http://www.chessit.net/" target="_blank">国际象棋译文苑</a>》文摘</dt>
    </center></div><div align="center"><center>
    <dt>　</dt>
    </center></div><div align="center"><center>
    <dt><font size="6" face="隶书"><strong>关于</strong></font><font
        size="6" face="Arial"><strong>PGN</strong></font><font
        size="6" face="隶书"><strong>和</strong></font><font
        size="6" face="Arial"><strong>FEN</strong></font><font
        size="6" face="隶书"><strong>记谱规范(下)</strong></font></dt>
    </center></div><div align="center"><center>
    <dt>　</dt>
    </center></div><div align="center"><center>
    <dt>来源：<font face="Times New Roman">rec.games.chess</font>新闻组</dt>
    </center></div>
    <dt>　</dt>
    <dt>　　<font face="Times New Roman">PGN</font>是用来储存对局的，除此之外为了适应国际象棋其它相关要求，还有其它的数据表示标准，最重要的两个是<font
        face="Times New Roman">FEN</font>和<font
        face="Times New Roman">EPD </font>。译文主要说说<font
        face="Times New Roman">FEN</font>的格式。</dt>
    <dt>　</dt>
    <div align="center"><center>
    <dt><font size="5" face="Arial"><strong>1</strong></font><font
        size="5"><strong>、</strong></font><font size="5"
        face="Arial"><strong>FEN</strong></font></dt>
    </center></div>
    <dt>　</dt>
    <dt>　　<font face="Times New Roman">FEN</font>就是“福斯夫<font
        face="Times New Roman">-</font>爱德华兹记号法”<font
        face="Times New Roman">(Forsyth-Edwards Notation)</font>，这是一种使用<font
        face="Times New Roman">ASCII</font>码字符描述国际象棋局面的标准。<font
        face="Times New Roman">FEN</font>是建立在<font
        face="Times New Roman">19</font>世纪由报社记者<font
        face="Times New Roman">S</font>&middot;<font
        face="Times New Roman">D</font>&middot;福斯夫设计的记录局面的标准基础上的。后来为了适合象棋软件的需要，由爱德华兹对此做了少许修改。</dt>
    <dt>　　一份标准的局面记号对需要大量交换共享局面数据的国际象棋程序设计等工作具有尤其重要的作用。<font
        color="#000080">【译注：实际上，对于一般学棋拆棋，哪怕是娱乐，也很有用，后文将简单举例说明】</font></dt>
    <dt>　</dt>
    <dt><font size="4" face="黑体"><strong>1-1 结构描述</strong></font></dt>
    <dt>　　一个<font face="Times New Roman">FEN</font>记录使用长度可不同的一行来表示，由六个区域组成。单纯的<font
        face="Times New Roman">FEN</font>记录文件后缀应该是“<font
        face="Times New Roman">.fen</font>”，比如：<font
        face="Times New Roman">kk-1.fen</font>。</dt>
    <dt>　　<font face="Times New Roman">FEN</font>描述了：棋子位置、轮走棋方、易位可行性、吃过路兵目标格、半步计数、以及总回合数。所有这一切用一行文字符号表示就行了而且非常容易读。</dt>
    <dt>　　看看一个<font face="Times New Roman">FEN</font>的六个区域及其含义，先举一个谁都太熟悉了的局面的<font
        face="Times New Roman">FEN</font>文件：</dt>
    <dd><font color="#FF0000">rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR</font>
        <font color="#008000">w</font> <font color="#800080">KQkq</font>
        <font color="#FF00FF">-</font> <font color="#0000FF">0</font>
        <font color="#800000">1</font></dd>
    <dt>　　这就是每盘常规对局的最初局面，一个子都没有动。</dt>
    <dt>　　译文以不同颜色表示了这个<font
        face="Times New Roman">FEN</font>中的六个不同区域，它们是：</dt>
    <dt>　</dt>
    <dt><font face="Times New Roman">1) </font>棋子位置数值区域<font
        face="Times New Roman">(Piece placement data) </font><font
        color="#FF0000">红色那段</font></dt>
    <dt>　　就是表示双方棋子各在棋盘哪个格子上的。规则是从第<font
        face="Times New Roman">8</font>横线开始顺次数到第<font
        face="Times New Roman">1</font>横线<font
        face="Times New Roman">(</font>白方在下，从上数到下<font
        face="Times New Roman">)</font>，从<font
        face="Times New Roman">a</font>线开始顺次数到<font
        face="Times New Roman">h</font>线；白方棋子以大写字母“<font
        face="Times New Roman">PNBRQK</font>”表示，黑方棋子以小写“<font
        face="Times New Roman">pnbrqk</font>”表示，这是英文表示法，每个字母代表的意义与常规规定相同。数字代表一个横线上的连续空格，反斜杠“<font
        face="Times New Roman">/</font>”
        表示结束一个横线的描述。</dt>
    <dt>　　上面的那<font face="Times New Roman">pppppppp</font>，就是表示黑方在第<font
        face="Times New Roman">7</font>横线上排有<font
        face="Times New Roman">8</font>只兵；后面那<font
        face="Times New Roman">4</font>个数字<font
        face="Times New Roman">8</font>，就是表示从第<font
        face="Times New Roman">6</font>到第<font
        face="Times New Roman">3</font>横线，双方一个棋子都不在，是空格；<font
        face="Times New Roman">7</font>个反斜杠“<font
        face="Times New Roman">/</font>”将第一区域分成<font
        face="Times New Roman">8</font>段，因为棋盘有<font
        face="Times New Roman">8</font>条横线；其它的照着图完全可以类推。</dt>
    <dt>　</dt>
    <dt><font face="Times New Roman">2) </font>轮走棋方<font
        face="Times New Roman">(Active color) </font><font
        color="#008000">深绿色那段</font></dt>
    <dt>　　表示目前局面该谁走棋。小写“<font
        face="Times New Roman">w</font>”表示白方走棋；小写“<font
        face="Times New Roman">b</font>”表示黑方走棋；
        显然起初局面肯定是白先，所以上面就是“<font
        face="Times New Roman">w</font>” 。</dt>
    <dt>　</dt>
    <dt><font face="Times New Roman">3) </font>易位可行性<font
        face="Times New Roman">(Castling availability) </font><font
        color="#800080">紫色那段</font></dt>
    <dt>　　这表示在当前局面下每一方有没有潜在的各种王车易位的可行性<font
        face="Times New Roman">(</font>目前不一定行，但以后有可能行<font
        face="Times New Roman">)</font>。如果谁都没有，就用“<font
        face="Times New Roman">-</font>”表示；大写“<font
        face="Times New Roman">K</font>”表示白方有短易位的可行性，大写“<font
        face="Times New Roman">Q</font>”表示白方有长易位的可行性；对应的小写“<font
        face="Times New Roman">k</font>”和“<font
        face="Times New Roman">q</font>”代表黑方短和长易位的可行性。书写顺序必须是先大写后小写、先短易位后长易位，并且之间不能有空格。</dt>
    <dt>　</dt>
    <dt><font face="Times New Roman">4) </font>吃过路兵目标格<font
        face="Times New Roman">(En passant target square) </font><font
        color="#FF00FF">紫红色那段</font></dt>
    <dt>　　如果没有，就用“<font
        face="Times New Roman">-</font>”表示。如果有，就用具体完成吃过路兵的那个格子坐标来表示，显然对于白兵被吃只可能在第<font
        face="Times New Roman">3</font>横线，对于黑兵被吃只可能在第<font
        face="Times New Roman">6</font>横线。而且，这个标记是且只是在该局面紧接的上一步棋是某方刚走兵推进两格的情况下出现。</dt>
    <dt>　</dt>
    <dt><font face="Times New Roman">5) </font>半回合计数<font
        face="Times New Roman">(Halfmove clock) </font><font
        color="#0000FF">浅蓝色那段</font></dt>
    <dt>　　用一个非负数表示自从上一次动兵或吃子之后目前走了的半回合数。这个是为了适应<font
        face="Times New Roman">50</font>步和棋规则而定。<font
        color="#000080">【译注：但是在</font><font
        color="#000080" face="Times New Roman">winboard</font><font
        color="#000080">的</font><font color="#000080"
        face="Times New Roman">FEN</font><font color="#000080">输出中，这个值好象总是</font><font
        color="#000080" face="Times New Roman">0</font><font
        color="#000080">】</font></dt>
    <dt>　</dt>
    <dt><font face="Times New Roman">6) </font>回合数<font
        face="Times New Roman">(Fullmove number) </font><font
        color="#800000">棕色那段</font></dt>
    <dt>　　当前要进行到的回合数。不管白还是黑，第一步时总是以<font
        face="Times New Roman">1</font>表示，以后黑方每走一步数字就加<font
        face="Times New Roman">1</font>。</dt>
    <dt>　</dt>
    <dt><font size="4" face="黑体"><strong>1-2 举例</strong></font></dt>
    <dt>　　好了，举例说明：</dt>
    <dt>　　假如从开局开始，走了<font
        face="Times New Roman">1. e4 e5 2. Nf3 Nc6 3. Bc4 Nf6 4.
        Ng5 d5 5. exd5 Nxd5 6. Nxf7 Kxf7 7. Qf3+</font>　<font
        face="Times New Roman">Qf6 8. Bxd5+ Be6 9. Bxc6 bxc6 10.
        Qxc6 Bd6 11. Nc3 Rhd8</font></dt>
    <dt>　　这个写成<font face="Times New Roman">FEN</font>就是</dt>
    <dd><font color="#FF0000">r2r4/p1p2kpp/2Qbbq2/4p3/8/2N5/PPPP1PPP/R1B1K2R</font>
        <font color="#008000">w</font> <font color="#800080">KQ</font>
        <font color="#FF00FF">-</font> <font color="#0000FF">0</font>
        <font color="#800000">12 </font><font
        face="Times New Roman">(</font>图<font
        face="Times New Roman">)</font></dd>
</dl>

<table border="0" width="100%">
    <tr>
        <td><font face="Times New Roman"><img src="pgnfen2.gif"
        width="256" height="256"></font></td>
        <td><dl>
            <dt><font face="Times New Roman">1) </font><font
                color="#FF0000">第一区域</font></dt>
            <dt>　　第<font face="Times New Roman">8</font>横线<font
                face="Times New Roman">r2r4</font>，全是黑子<font
                face="Times New Roman">(</font>小写<font
                face="Times New Roman">)</font>，从左到右依次是：黑车<font
                face="Times New Roman">r</font>、<font
                face="Times New Roman">2</font>个连续空格、黑车<font
                face="Times New Roman">r</font>、然后<font
                face="Times New Roman">4</font>个连续空格，这横线<font
                face="Times New Roman">8</font>个格子都说明了；</dt>
            <dt>　　第<font face="Times New Roman">1</font>横线<font
                face="Times New Roman">R1B1K2R</font>，全是白子<font
                face="Times New Roman">(</font>大写<font
                face="Times New Roman">)</font>，从左到右依次是：白车<font
                face="Times New Roman">R</font>、<font
                face="Times New Roman">1</font>个空格、白象<font
                face="Times New Roman">B</font>、<font
                face="Times New Roman">1</font>个空格、白王<font
                face="Times New Roman">K</font>、两个空格、白车<font
                face="Times New Roman">R</font>，刚好<font
                face="Times New Roman">8</font>个格子；</dt>
            <dt>　　其它类推，要说明的是第<font
                face="Times New Roman">6</font>横线和第<font
                face="Times New Roman">4</font>横线</dt>
            <dt>　　第<font face="Times New Roman">6</font>横线就是<font
                face="Times New Roman">2Qbbq2</font>，从左到右依次是：<font
                face="Times New Roman">2</font>个空格、白后<font
                face="Times New Roman">Q(</font>注意这是大写！<font
                face="Times New Roman">)</font>、黑象<font
                face="Times New Roman">b</font>、黑象<font
                face="Times New Roman">b</font>、黑后<font
                face="Times New Roman">q</font>、<font
                face="Times New Roman">2</font>个空格，刚好<font
                face="Times New Roman">8</font>个；第<font
                face="Times New Roman">4</font>横线，空空如也，所以就是用“<font
                face="Times New Roman">8</font>”表示，表示<font
                face="Times New Roman">8</font>个连续空格。</dt>
            <dt><font face="Times New Roman">2) </font><font
                color="#008000">第二区域</font></dt>
            <dt>　　因为这时轮到白方走棋，所以就是“<font
                face="Times New Roman">w</font>”。</dt>
            <dt><font face="Times New Roman">3) </font><font
                color="#800080">第三区域</font></dt>
            <dt>　　黑方的王已经动过所以失去易位可行性；白方的王则可以，以“<font
                face="Times New Roman">KQ</font>”表示。</dt>
        </dl>
        </td>
    </tr>
</table>

<dl>
    <dt><font face="Times New Roman">4) </font><font
        color="#FF00FF">第四区域</font></dt>
    <dt>　　上一着没有兵推进两格，所以不存在吃过路兵目标格，用“<font
        face="Times New Roman">-</font>”表示。</dt>
    <dt><font face="Times New Roman">5) </font><font
        color="#0000FF">第五区域</font></dt>
    <dt>　　<font face="Times New Roman">WinBoard</font>总是输出“<font
        face="Times New Roman">0</font>” ……不过这个标记作用有限。</dt>
    <dt><font face="Times New Roman">6) </font><font
        color="#800000">第六区域</font></dt>
    <dt>　　黑方已走完第<font face="Times New Roman">11</font>回合，所以现在是第<font
        face="Times New Roman">12</font>回合。</dt>
    <dt>　</dt>
    <dt><font size="4" face="黑体"><strong>1-3 其它</strong></font></dt>
    <dt>　　其实，使用打谱软件比如<font
        face="Times New Roman">winboard</font>或<font
        face="Times New Roman">chessbase</font>，无论输入还是输出<font
        face="Times New Roman">FEN</font>记录和文件都是自动式的，很方便，了解它的规则只是为了深入一些应用或遇到问题时自己可以解决。另外，在网上之间传递棋局，不用把棋图画在纸上或用文字笨拙地描述了，不用说“王在<font
        face="Times New Roman">e1, </font>后在<font
        face="Times New Roman">XX</font>，……”等等。写成<font
        face="Times New Roman">FEN</font>格式，或者干脆使用<font
        face="Times New Roman">winboard</font>等直接输出<font
        face="Times New Roman">FEN</font>文件，然后发过去甚至让对方直接“粘贴<font
        face="Times New Roman">-</font>复制<font
        face="Times New Roman">-</font>再粘贴”，几秒钟对方就可以完全重现该局面。</dt>
    <dt>　</dt>
    <dt>　　出处：<font face="Times New Roman">Chess world </font>的
        <font face="Times New Roman">PGN Archive</font></dt>
    <dt>　　译者：<font face="Times New Roman">michael</font></dt>
    <dt>　　类型：编译</dt>
</dl>

<dir>
    <li>上一篇　<a href="pgnfen1.htm">关于<font
        face="Times New Roman">PGN</font>和<font
        face="Times New Roman">FEN</font>记谱规范<font
        face="Times New Roman">(</font>上<font
        face="Times New Roman">)(</font>转载自《国际象棋译文苑》<font
        face="Times New Roman">)</font></a></li>
    <li>下一篇　<a href="protocol1.htm">国际象棋引擎：穿越困惑<font
        face="Times New Roman">(</font>转载自《国际象棋译文苑》<font
        face="Times New Roman">)</font></a></li>
    <li>返　回　<a href="../protocol.htm">象棋百科全书――规则与协议</a></li>
</dir>
<div align="center"><center>

<table border="0">
    <tr>
        <td><p align="center"><a
        href="http://www.xqbase.com/" target="_blank"><img
        src="../xqbase.gif" border="0" width="88"
        height="31"></a></p>
        </td>
    </tr>
    <tr>
        <td><a href="http://www.xqbase.com/"
        target="_blank"><font size="2" face="Arial"><strong>www.xqbase.com</strong></font></a></td>
    </tr>
</table>
</center></div>
</body>
</html>
